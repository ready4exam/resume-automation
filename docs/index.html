<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Resume Tailor Engine</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 40px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 0 10px #ccc;
    }
    h2 {
      margin-top: 0;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 20px;
    }
    input, textarea, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #bbb;
      font-size: 15px;
      box-sizing: border-box;
    }
    textarea {
      height: 150px;
      resize: vertical;
    }
    .checkbox-row {
      margin-top: 8px;
    }
    .checkbox-row input {
      width: auto;
      transform: scale(1.1);
      margin-right: 6px;
    }
    button {
      margin-top: 30px;
      width: 100%;
      padding: 14px;
      background: #111827;
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #1f2937;
    }
    #status {
      margin-top: 15px;
      font-size: 14px;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>AI Resume Tailor (GitHub Issue Trigger)</h2>
  <p>
    Fill the details and click <b>Create GitHub Issue</b>. A new tab will open on GitHub with a pre-filled Issue.  
    Check it and click <b>"Submit new issue"</b> to start the resume generation.
  </p>

  <form id="resumeForm">
    <label>Company Name</label>
    <input id="company" placeholder="e.g., Google, Microsoft, Cognizant" required />

    <label>Job Title</label>
    <input id="jobTitle" placeholder="e.g., Engagement Delivery Lead" required />

    <label>Resume Type</label>
    <select id="resumeMode">
      <option value="infra">Infra Only</option>
      <option value="hybrid">Infra + Development</option>
      <option value="dev">Development Only</option>
    </select>

    <label>Apply Methodologies</label>
    <div class="checkbox-row">
      <input type="checkbox" id="agile" /> <span>Agile</span>
    </div>
    <div class="checkbox-row">
      <input type="checkbox" id="finops" /> <span>FinOps</span>
    </div>

    <label>Job Description</label>
    <textarea id="jobDesc" placeholder="Paste the full job description here..." required></textarea>

    <label>Extra Instructions (Optional)</label>
    <textarea id="extra" placeholder="Any additional instructions..."></textarea>

    <button type="submit">Create GitHub Issue</button>
  </form>

  <p id="status"></p>
</div>

<script>
  // Set this to your repo: owner/repo
  const repoFullName = "ready4exam/resume-automation";

  document.getElementById("resumeForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const company = document.getElementById("company").value.trim();
    const jobTitle = document.getElementById("jobTitle").value.trim();
    const resumeMode = document.getElementById("resumeMode").value;
    const jobDesc = document.getElementById("jobDesc").value.trim();
    const extra = document.getElementById("extra").value.trim();

    const agile = document.getElementById("agile").checked;
    const finops = document.getElementById("finops").checked;

    const statusEl = document.getElementById("status");

    if (!company || !jobTitle || !jobDesc) {
      statusEl.innerText = "❌ Company, Job Title, and Job Description are required.";
      return;
    }

    const methodologies = [];
    if (agile) methodologies.push("Agile");
    if (finops) methodologies.push("FinOps");

    // Body format that the workflow will parse
    const bodyLines = [
      `Company: ${company}`,
      `Job Title: ${jobTitle}`,
      `Resume Mode: ${resumeMode}`,
      `Methodologies: ${methodologies.join(",")}`,
      "",
      "Job Description:",
      jobDesc,
      "",
      "Extra:",
      extra || "(none)"
    ];

    const title = `Tailor Resume: ${jobTitle} at ${company}`;
    const body = bodyLines.join("\n");

    const url =
      `https://github.com/${repoFullName}/issues/new` +
      `?title=${encodeURIComponent(title)}` +
      `&body=${encodeURIComponent(body)}`;

    statusEl.innerHTML =
      "✅ Opening GitHub Issue page in a new tab...<br>" +
      "Make sure you are logged into GitHub, then click <b>\"Submit new issue\"</b> there.";

    window.open(url, "_blank");
  });
</script>

</body>
</html>
